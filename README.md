# Pocket Pawns — Demo A-1

口袋棋兵（Pocket Pawns）Demo A-1：單角色移動 + 遇到 NPC 判定

## 簡介
這是一個輕量的 HTML5 Canvas 示範，展示以六角格（axial hex）為基礎的移動、NPC 隨機佈局與遭遇戰判定。主要互動在 `preview.html` 中。

## 快速上手
1. 在瀏覽器中開啟專案中的 `preview.html`（例如直接以檔案開啟或透過簡單靜態伺服器）。
2. 在右側面板選擇一個角色（或放置自訂角色圖片，見下方）。
3. 按「開始遊戲」即可在地圖上與多名 NPC 互動。

操作：
- 點選六角相鄰格以移動角色。
- 或使用鍵盤 `W A S D` 控制（須在非輸入欄位）。

## 角色圖片（客製化）
支援將專案內的 PNG 作為棋上角色立繪：
- 將 PNG 放到專案的 `image/` 資料夾下。
- 檔名必須與遊戲內角色名稱完全相同（例：`魯拉拉.png`、`烈火拳.png`、`影迅.png`、`智將.png`、`混沌.png`）。
- 程式會自動嘗試載入 `image/<角色名>.png`；若找不到或載入失敗，會回退為原本的圓形標記。
- 預設繪製高度為 `HEX * 2`（在 `preview.html` 中 `HEX` 為六角半徑像素），圖片底部會對齊格子並帶有陰影。

若想把圖片放在其他資料夾或使用不同命名，請告訴我我可以幫你修改對應程式碼或新增對照表。

## 音樂（BGM）控制
- 頁面已加入 BGM 支援：檔案為 `sound/BGM.mp3`（請放到 `sound/` 資料夾）。
- 頁面載入時會嘗試自動播放；若被瀏覽器攔截，點擊任意處即可解鎖播放。
- 面板上有音量滑桿與靜音按鈕，音量設定會儲存在 `localStorage` 的 `ppf_bgm_volume`。

## UI 與面板功能總覽
- 右側面板含：角色選擇、棋盤背景選擇（預設：無 / 格線 / 木紋 / 石材 / 專案圖片）、上傳自訂背景、NPC 機率滑桿、難度預設與儲存。
- 面板也顯示玩家與 NPC 的屬性、最近一次判定紀錄、勝場數與狀態提示。

## 開發者說明（程式要點）
- 主要檔案：`preview.html`。
- 關鍵程式段：
  - 六角座標與轉換：`axialToPixel()`、`pixelToAxial()`、`hexRound()`。
  - 盤面產生：`regenTiles()`。
  - NPC 佈置：`placeNpcList()`。
  - 角色圖片載入：`loadCharImages()`（會嘗試載入 `image/<角色名>.png` 並存在 `CHAR_IMAGES` 中）。
  - 繪製：`draw()` 中會以影像繪製角色（若有對應圖片）或回退到圓形繪製。

## 建議與下一步
- 若需要：自動縮放/裁切上傳圖片、生成 sprite 或合併位置管理，我可以幫忙自動處理上傳圖片並產生合適尺寸的副本。
- 如果你希望控制圖片放置資料夾或提供自訂 mapping（檔名不等於角色名），我可以把畫面面板新增映射介面。

## 測試與除錯
- 若角色圖片未顯示，請檢查 `image/` 下檔名（含全形/半形字元與空格）、瀏覽器 Console 是否有載入錯誤（CORS / 路徑編碼問題）。
- BGM 若無法播放，確保檔案存在 `sound/BGM.mp3`，或在面板點擊頁面以解鎖自動播放。

---
如果你要我把 README 翻成英文、加入示意截圖、或把圖片自動壓縮／移動到 `image/characters/`，我可以接著做。